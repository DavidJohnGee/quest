#!/usr/bin/env ruby

begin
  require 'quest'
  require 'gli'
rescue
  require 'rubygems'
  require 'quest'
  require 'gli'
end

include GLI::App

# Controllers for the quest service
# Move to questctl

desc 'Start the quest service'
command :start do |c|
  c.action do |global_options, options, args|
    watcher = Quest::QuestWatcher.new
    watcher.run!
  end
end
desc 'Stop the quest service'
command :stop do |c|
  c.action do |global_options, options, args|
    include Quest::Messenger
    send_quit
  end
end
desc 'Restart the quest service'
command :restart do |c|
  c.action do |global_options, options, args|
    true
  end
end
desc 'Build quest html content to doc_root directory'
command :build do |c|
  c.action do |global_options, options, args|
    Quest::QuestGuide.new.populate_web_dir
  end
end

exit run(ARGV)
